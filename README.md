# Opinion.trade 自动交易脚本

自动化 [Opinion.trade](https://app.opinion.trade) 交易流程的油猴脚本。

## ✨ 功能特性

- 🤖 **自动交易**: 自动选择选项 → 输入金额 → 等待 → 卖出
- 🎛️ **可视化配置**: GM_config 图形化配置界面
- ⏱️ **定时持仓**: 精确控制持仓时间
- 🔄 **重试机制**: 失败自动重试
- 📊 **详细日志**: 完整的交易过程日志
- 🚀 **一键启动**: 页面内控制面板,操作简便

## 📦 安装步骤

### 1. 安装油猴扩展

选择以下任一油猴扩展安装:

- [Tampermonkey](https://www.tampermonkey.net/) (推荐)
- [Greasemonkey](https://www.greasespot.net/)
- [Violentmonkey](https://violentmonkey.github.io/)

### 2. 安装脚本

- **方式一**: 点击 [安装链接](opinion-auto-trader.user.js) (如果已托管到 Greasy Fork)
- **方式二**: 手动安装
  1. 打开油猴扩展面板
  2. 点击"添加新脚本"
  3. 复制 `opinion-auto-trader.user.js` 内容
  4. 保存脚本 (Ctrl+S / Cmd+S)

## 🚀 使用方法

### 首次配置

1. 访问 [Opinion.trade](https://app.opinion.trade)
2. 点击页面右上角的油猴图标
3. 选择 "Opinion.trade 自动交易脚本"
4. 点击 "配置" 按钮或使用菜单命令
5. 填写交易参数:
   - **市场链接**: 完整的市场详情页 URL
   - **选项名称**: 要交易的选项 (如 "No change", "25 bps decrease")
   - **交易金额**: 买入金额
   - **持仓时间**: 持仓多少秒后卖出
   - **交易方向**: YES 或 NO
   - **自动开始**: 页面加载后是否自动执行
6. 保存配置

### 执行交易

**方式一: 使用控制面板**
1. 访问配置的市场链接
2. 点击页面右上角的 "开始交易" 按钮

**方式二: 使用菜单命令**
1. 访问配置的市场链接
2. 点击油猴图标 → "▶️ 开始交易"

**方式三: 自动执行**
1. 在配置中启用 "自动开始"
2. 访问市场链接,脚本将自动执行

## ⚙️ 配置说明

### 交易设置

| 参数 | 说明 | 示例 |
|------|------|------|
| 市场链接 | 完整的市场详情页 URL | `https://app.opinion.trade/detail?topicId=61&type=multi` |
| 选项名称 | 要交易的选项名称 | `No change`, `25 bps decrease` 等 |
| 交易金额 | 买入金额 (最小 0.01) | `10`, `50`, `100` |
| 持仓时间 | 持仓多少秒后卖出 | `60` (1分钟), `300` (5分钟) |
| 交易方向 | YES (买入看涨) 或 NO (买入看跌) | `YES` / `NO` |
| 自动开始 | 页面加载后是否自动执行 | `true` / `false` |

### 高级设置

| 参数 | 说明 | 默认值 |
|------|------|--------|
| 交易前等待 | 执行交易前等待时间(秒) | `2` |
| 重试次数 | 失败后的重试次数 | `3` |
| 启用详细日志 | 在控制台显示详细日志 | `true` |

## 📝 交易流程

```
1. 打开市场链接
   ↓
2. 选择指定选项
   ↓
3. 输入交易金额
   ↓
4. 点击 YES/NO 按钮
   ↓
5. 等待持仓时间
   ↓
6. 卖出持仓
```

## 🔍 查看日志

1. 按 `F12` 打开浏览器开发者工具
2. 切换到 "Console" 标签
3. 查看带有 `[Opinion Auto Trader]` 前缀的日志

## ⚠️ 注意事项

1. **连接钱包**: 首次使用需要先连接钱包
2. **测试环境**: 建议先用小额资金测试
3. **网络延迟**: 持仓时间可能因网络延迟有误差
4. **页面可见**: 交易期间请保持页面可见(不要切换标签)
5. **风险自负**: 本脚本仅供学习研究,使用风险自负

## 🐛 故障排除

### 问题: 找不到选项按钮
- **原因**: 选项名称不匹配
- **解决**: 检查配置中的"选项名称"是否与页面显示完全一致

### 问题: 找不到交易按钮
- **原因**: 页面未完全加载或选项未展开
- **解决**: 增加"交易前等待"时间

### 问题: 金额无法输入
- **原因**: 输入框未找到或被禁用
- **解决**: 检查是否已连接钱包

### 问题: 交易未执行
- **原因**: 配置错误或页面不匹配
- **解决**:
  1. 检查浏览器控制台日志
  2. 确认 URL 与配置的市场链接一致
  3. 确保"启用详细日志"已开启

## 🛠️ 技术栈

- **油猴脚本**: Vanilla JavaScript
- **配置管理**: [GM_config](https://github.com/sizzlemctwizzle/GM_config)
- **依赖库**: 无 (除了 GM_config)

## 📄 License

MIT License

## 🤝 贡献

欢迎提交 Issue 和 Pull Request!

## 📮 联系方式

如有问题或建议,请提交 Issue。

---

**免责声明**: 本脚本仅供学习和研究目的。使用本脚本进行交易的任何风险和损失由使用者自行承担。
